#:import images_path kivymd.images_path
#:import get_color_from_hex kivy.utils.get_color_from_hex
#:import date datetime.date
#:import datetime datetime.datetime
#:import os os

#:set today date.today()
#:set now datetime.now()


<CardScreenLabel@MDLabel>
    adaptive_height: True
    color: "#1e4974"
    font_name: f"{os.environ['KITCHEN_SINK_ASSETS']}/fonts/nasalization.ttf"


<CardScreenView>

    FitImage:
        source:
            f"{os.environ['KITCHEN_SINK_ASSETS']}/" \
            f"images/card_screen/nature-bg.jpg"

    MDBoxLayout:
        orientation: "vertical"
        padding: "12dp"

        CardScreenLabel:
            id: time
            text: today.strftime("%b-%d-%Y")
            font_size: "18sp"

        CardScreenLabel:
            text: now.strftime("%H:%M:%S")
            font_size: "28sp"

        MDBoxLayout:
            adaptive_size: True
            spacing: "12dp"
            padding: 0, "12dp", 0, 0

            MDBoxLayout:
                id: card_box
                orientation: "vertical"
                adaptive_size: True
                spacing: "12dp"

                CardProfile:
                    name_user: "Rachel"
                    date: "2 weeks ago"
                    status: "Chatted"
                    radius: [int(self.height / 2),]
                    md_bg_color: get_color_from_hex("#1e4974")
                    path_to_avatar:
                        f"{os.environ['KITCHEN_SINK_ASSETS']}/" \
                        f"images/card_screen/avatar-profile.jpg"

                CardCall:
                    name_caller: "Rachel"
                    radius: [int(self.height / 4),]
                    md_bg_color: get_color_from_hex("#1e4974")

                CardProfile:
                    name_user: "Monica"
                    date: "2 weeks ago"
                    status: "Chatted"
                    radius: [int(self.height / 2),]
                    md_bg_color: get_color_from_hex("#1e4974")
                    path_to_avatar:
                        f"{os.environ['KITCHEN_SINK_ASSETS']}/" \
                        f"images/card_screen/avatar-message.jpg"

            CardMessage:
                size_hint_y: None
                height: card_box.height
                name_user: "Monica Geller"
                message: "I`m making a lasagna for dinner"
                date: "1 hour ago"
                radius: [int(self.height / 10),]
                padding: "12dp"
                md_bg_color: get_color_from_hex("#3b7fad")
                path_to_avatar:
                    f"{os.environ['KITCHEN_SINK_ASSETS']}/" \
                    f"images/card_screen/avatar-message.jpg"

        Widget:

    CardNotification:
        id: card_notification
        radius: [int(self.height / 10),]
        pos_hint: {"center_x": .5}
        padding: 0
        text_top: "New photos added • [size=12]5m[/size]"
        icon_top: "email"
        text_bottom: "Megan Ono • [size=12]5m[/size]"
        icon_bottom: "image"
        secondary_text_bottom: "How was your trip?"
        secondary_text_top: "Oregon Coast"
        icon_color: get_color_from_hex("#1e4974")
        md_bg_color: get_color_from_hex("#5f9acc")

    MDIconButton:
        icon: "arrow-left"
        md_bg_color: 0, 0, 0, .2
        on_release: app.manager_screen.current = "menu"
        pos:
            root.width - self.width - dp(12), \
            root.height - self.height - dp(12)
